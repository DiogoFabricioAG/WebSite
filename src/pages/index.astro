---
import "../styles/global.css";
import BaseLayout from "../layouts/BaseLayout.astro";
import Navbar from "../components/Navbar.astro";
import Experiencebox from "../components/Experiencebox.astro";
import Projectsbox from "../components/Projectsbox.astro";
import BoxLayout from "../layouts/BoxLayout.astro";
import { Image } from "astro:assets";
import ContactBox from "../components/ContactBox.astro";
import ImageAvatar from "../../public/avatar.png";
---

<BaseLayout>
  <Navbar />
  <section id="inicio" class="h-[100vh]">
    <div class="my-8 text-center w-48 mx-auto shadow-xl/30
	 shadow-white">
      <Image
        src={ImageAvatar}
        id="avatar"
        alt="Avatar Diogo Abregu"
        class="mx-auto h-48 w-48"
      />
      <div class="bg-white text-black w-48 mx-auto">
        <span class="text-lg">System Engineer</span>
      </div>
    </div>
    <div class="space-y-3 mx-auto">
      <h2 class="text-4xl text-center font-Jost font-extrabold">
        Diogo Abregu Gonzales
      </h2>
      <p class="text-center font-light">
        Especializado en el desarrollo de soluciones tecnol贸gicas en cualquier
        aspecto del negocio
      </p>
      <div class="flex justify-center flex-wrap space-x-2">
        <a href="#contacto" class="relative inline-block group">
          <button class="button-clean">Contactar</button>
          <span class="shadow-box"></span>
        </a>
        <div class="relative inline-block group">
          <button class="button-clean">Descargar CV</button>
          <span class="shadow-box"></span>
        </div>
      </div>
    </div>
  </section>
  <section id="sobre-mi" class="h-[100vh]">
    <BoxLayout>
      <h2 class="text-5xl font-Jost font-extrabold mb-10">Sobre m铆</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mx-auto">
        <div class="space-y-3">
          <p class="text-lg leading-relaxed">
            Enfocado en crear soluciones web r谩pidas, accesibles y mantenibles.
            Me gusta trabajar cerca del negocio para alinear la tecnolog铆a con
            objetivos reales.
          </p>
          <p class="text-white/80 text-sm">
            Implemento la tecnolog铆a adecuada para resolver problemas,
            priorizando la arquitectura y la calidad de la soluci贸n, entre ellas
            destaco: <br />
            <b>Web Development</b>, <b>Cloud Computing</b> y <b
              >AI Integration</b
            >.
          </p>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="about-card border border-white/60 p-4">
            <h3 class="font-semibold mb-1">Frontend</h3>
            <p class="text-sm text-white/80">Astro, React, TypeScript</p>
          </div>
          <div class="about-card border border-white/60 p-4">
            <h3 class="font-semibold mb-1">Backend</h3>
            <p class="text-sm text-white/80">Node.js, Python, Java</p>
          </div>
          <div class="about-card border border-white/60 p-4">
            <h3 class="font-semibold mb-1">Bases de datos</h3>
            <p class="text-sm text-white/80">PostgreSQL, MongoDB</p>
          </div>
          <div class="about-card border border-white/60 p-4">
            <h3 class="font-semibold mb-1">DevOps</h3>
            <p class="text-sm text-white/80">Docker, CI/CD, AWS</p>
          </div>
        </div>
      </div>
    </BoxLayout>
  </section>
  <section id="experiencia" class="h-[150vh]">
    <BoxLayout>
      <h2 class="text-5xl font-Jost font-extrabold mb-10">Experiencia</h2>
      <div class="grid grid-cols-2 justify-center gap-5 mx-auto">
        <Experiencebox
          title="Full Stack Developer"
          company="Freelance"
          location="Remoto"
          durationDate="03/23 - ACT"
          icon="/logo-portfolio.png"
          points={[
            "Apps web r谩pidas y modulares",
            "Integraci贸n con APIs externas",
            "Entrega continua simple",
          ]}
          techs={[
            "/icons/astro.svg",
            "/icons/vue.svg",
            "/icons/sql-server.svg",
            "/icons/sqlite.svg",
            "/icons/django.svg",
            "/icons/expressjs.svg",
            "/icons/csharp.svg",
          ]}
        />
        <Experiencebox
          title="Web Developer"
          company="Proyecta UNI"
          location="Lima"
          durationDate="06/24 - 03/25"
          icon="/experience-logos/proy-uni.png"
          points={[
            "Portal interno estable",
            "Refactor de componentes",
            "Mejora de tiempos de carga",
          ]}
          techs={["/icons/wordpress.svg", "/icons/html.svg", "/icons/css.svg"]}
        />
        <Experiencebox
          title="Tech Lead Jr"
          company="DSC"
          location="Lima"
          durationDate="09/24 - 05/25"
          icon="/experience-logos/dsc.png"
          points={[
            "Coordinaci贸n de equipo",
            "Patrones base definidos",
            "Soporte a despliegues",
          ]}
          techs={[
            "/icons/tailwindcss.svg",
            "/icons/github.svg",
            "/icons/react.svg",
          ]}
        />
        <Experiencebox
          title="Developer"
          company="UNI"
          location="Lima"
          durationDate="02/25 - ACT"
          icon="/experience-logos/uni.png"
          points={[
            "M贸dulos acad茅micos",
            "Optimizaci贸n de consultas",
            "Documentaci贸n interna",
          ]}
          techs={[
            "/icons/postgresql.svg",
            "/icons/spring.svg",
            "/icons/react.svg",
            "/icons/docker.svg",
            "/icons/github.svg",
            "/icons/typescript.svg",
            "/icons/fastapi.svg",
          ]}
        />
        <Experiencebox
          title="Dev Intern"
          company="Peri Institute"
          location="Remoto"
          durationDate="03/25 - ACT"
          icon="/experience-logos/peri.jpg"
          points={[
            "Scripts de soporte",
            "Tareas rutinarias automatizadas",
            "Mejor organizaci贸n de repos",
          ]}
          techs={[
            "/icons/appsheet.png",
            "/icons/python.svg",
            "/icons/javascript.svg",
            "/icons/google-cloud.svg",
          ]}
        />
        <Experiencebox
          title="Director Pilar EA"
          company="LEAD UNI"
          location="Lima"
          durationDate="04/25 - ACT"
          icon="/experience-logos/lead.svg"
          points={[
            "Gesti贸n de iniciativas",
            "Definici贸n de roadmap",
            "Soporte a proyectos estudiantiles",
          ]}
          techs={[
            "/icons/react.svg",
            "/icons/typescript.svg",
            "/icons/aws.svg",
            "/icons/github.svg",
            "/icons/actions.png",
          ]}
        />
      </div>
    </BoxLayout>
  </section>
  <section id="proyectos" class="h-[100vh]">
    <BoxLayout>
      <h2 class="text-5xl font-Jost font-extrabold mb-10">Proyectos</h2>

      <div class="grid grid-cols-3 justify-center gap-5 mx-auto">
        <Projectsbox
          title="Clon UNIVirtual"
          description="lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam illo dicta, accusamus neque ex cum porro. Eveniet harum quibusdam ut et exercitationem, alias, libero iure illo veritatis qui hic quidem."
          finishDate="05/23"
          techs={[
            "/icons/vue.svg",
            "/icons/django.svg",
            "/icons/sqlite.svg",
            "/icons/tailwindcss.svg",
            "/icons/github.svg",
          ]}
          liveUrl="https://univirtual-demo.com"
        />
        <Projectsbox
          title="Sistema de Contabilidad"
          description="lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam illo dicta, accusamus neque ex cum porro. Eveniet harum quibusdam ut et exercitationem, alias, libero iure illo veritatis qui hic quidem."
          finishDate="12/24"
          techs={[
            "/icons/vue.svg",
            "/icons/netlify.svg",
            "/icons/spring.svg",
            "/icons/neon.svg",
            "/icons/github.svg",
          ]}
          liveUrl="https://univirtual-demo.com"
        />
        <Projectsbox
          title="GreedisGood"
          description="lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam illo dicta, accusamus neque ex cum porro. Eveniet harum quibusdam ut et exercitationem, alias, libero iure illo veritatis qui hic quidem."
          finishDate="02/25"
          techs={[
            "/icons/nuxt.svg",
            "/icons/spring.svg",
            "/icons/postgresql.svg",
            "/icons/github.svg",
          ]}
        />
        <Projectsbox
          title="Ensigna"
          description="lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam illo dicta, accusamus neque ex cum porro. Eveniet harum quibusdam ut et exercitationem, alias, libero iure illo veritatis qui hic quidem."
          finishDate="05/25"
          techs={[
            "/icons/stripe.svg",
            "/icons/fastapi.svg",
            "/icons/react.svg",
            "/icons/typescript.svg",
            "/icons/postgresql.svg",
            "/icons/github.svg",
          ]}
          repoUrl="https://github.com/user/ensigna"
        />
        <Projectsbox
          title="Pagina Web LEAD UNI"
          description="lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam illo dicta, accusamus neque ex cum porro. Eveniet harum quibusdam ut et exercitationem, alias, libero iure illo veritatis qui hic quidem."
          finishDate="07/25"
          techs={[
            "/icons/google-cloud.svg",
            "/icons/react.svg",
            "/icons/netlify.svg",
            "/icons/tailwindcss.svg",
            "/icons/github.svg",
          ]}
          liveUrl="https://ejemplo-leaduni.com"
          repoUrl="https://github.com/user/leaduni"
        />

        <div class="flex flex-col">
          <div
            class="bg-white border-2 px-2 border-white w-1/5 text-xs text-black"
          >
            + 10 M谩s
          </div>

          <div
            class="border border-white font-medium bg-white/20 flex justify-center w-full items-center h-full px-3 py-2"
          >
            <h3 class="text-2xl font-bold text-center">驴M谩s Proyectos?</h3>
          </div>

          <div
            class="px-1.5 py-1.5 bg-white w-full flex flex-wrap justify-end gap-2 text-[10px]"
          >
            <div class="relative inline-block group">
              <button class="button-clean-dark">Ir a Proyectos</button>
              <span class="shadow-box-dark"></span>
            </div>
          </div>
        </div>
      </div>
    </BoxLayout>
  </section>
  <section id="contacto">
    <BoxLayout>
      <h2 class="text-5xl font-Jost font-extrabold mb-10">Contacto</h2>
      <div class="flex mx-auto gap-5 justify-center w-4/5">
        <div class="w-1/2">
          <ContactBox />
          <div class="bg-white px-1.5 py-1.5 flex justify-end gap-2 text-xs">
            <div class="relative inline-block group">
              <button class="button-clean-dark">Enviar Mensaje</button>
              <span class="shadow-box-dark"></span>
            </div>
          </div>
        </div>
        <div class="w-1/3 self-start">
          <div
            class="border p-4 h-full flex flex-col justify-between bg-black/20 backdrop-blur-sm"
          >
            <div class="space-y-2">
              <h3 class="text-lg font-bold font-Jost">驴Prefieres hablar?</h3>
              <p class="text-xs leading-relaxed text-white/80">
                Agenda una reuni贸n corta conmigo y revisamos tu idea o
                necesidad.
              </p>
            </div>
            <div class="mt-4">
              <a
                href="https://calendly.com/diogo-abregu-g-uni/web-page-contact"
                target="_blank"
                rel="noopener"
                class="relative inline-block group"
              >
                <button class="button-clean-dark text-xs"
                  >Agendar reuni贸n</button
                >
                <span class="shadow-box"></span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </BoxLayout>
  </section>

  <section id="redes-sociales">
    <div class="flex justify-between mt-24 w-4/5 mx-auto text-sm items-center">
      <button id="copyright-btn">@ Diogo Abregu 2025</button>
      <div class="flex gap-4">
        <img
          src="/icons/github.svg"
          alt="GitHub"
          class="h-6 w-6 hover:scale-110 transition-transform duration-300"
        />
        <img
          src="/icons/linkedin.svg"
          alt="LinkedIn"
          class="h-6 w-6 hover:scale-110 transition-transform duration-300"
        />
        <img
          src="/icons/instagram.svg"
          alt="Instagram"
          class="h-6 w-6 hover:scale-110 transition-transform duration-300"
        />
      </div>
    </div>
  </section>

  <!-- Objetivos por cada Experiencia (3 Bullet Points) -->
  <!-- Rol y Contribuci贸n (Texto Destacada y Parrafo peque帽o)  -->
  <!-- Resultados y Logros (Indicador con Numeritos JEje) -->
  <!-- Enlaces y Pruebas (Carrusel de Imagenes + Enlaces) -->
  <div class="w-[100vw] h-[100vh] fixed top-0 left-0 bg-black/70">
    <div class="flex flex-col justify-center items-center h-full">
      <div class="bg-black/80 text-white p-6 border shadow-lg w-2/3">
        <div class="flex justify-between items-center mb-4">
          <div>
            <h2 class="text-2xl font-bold font-Jost">Web Developer</h2>
            <p class="text-xs text-white/80">
              PROYECTA UNI - 06/24 - 03/25 
            </p>
          </div>
          <img
            src="/experience-logos/proy-uni.png"
            alt="Web Developer"
            class="size-10"
          />
        </div>
        <h3 class="text-lg font-bold font-Jost">Descripci贸n del Empleo</h3>
        <div class="grid grid-cols-4 gap-2">
          <div class="flex flex-col justify-center text-center gap-2 p-2">
            <div
              class="border text-xs p-2 select-none hover:bg-red-800/50 duration-150"
            >
              Desarrollo Inteligente
            </div>
            <div
              class="border text-xs p-2 select-none hover:bg-white/50 duration-150"
            >
              Optimizaci贸n de Procesos
            </div>
            <div
              class="border text-xs p-2 select-none hover:bg-blue-800/50 duration-150"
            >
              Ecosistema Google Cloud
            </div>
          </div>
          <div class="mt-4 col-span-2">
            <p class="text-sm leading-relaxed">
              Desarroll茅 y mantuve el portal interno de Proyecta UNI, asegurando
              su estabilidad y mejorando la experiencia del usuario. Implement茅
              refactorizaciones de componentes clave para optimizar el
              rendimiento y reducir los tiempos de carga, lo que result贸 en una
              navegaci贸n m谩s fluida. Colabor茅 estrechamente con el equipo para
              identificar 谩reas de mejora y aplicar soluciones efectivas.
            </p>
          </div>
          <div class="grid grid-cols-2 gap-2">
              <div
                class="border text-xs p-2 select-none hover:bg-white/15 duration-150"
              >
                Reducci贸n de tiempos
                <br>
                <span class=" text-2xl font-bold">30%</span>
              </div>
              <div
                class="border text-xs p-2 select-none hover:bg-white/15 duration-150"
              >
                Mejoras Implementadas
                <br>
                <span class=" text-2xl font-bold">15</span>
              </div>
              <div
                class="border text-xs p-2 select-none hover:bg-white/15 duration-150"
              >
                Usuarios Activos
                <br>
                <span class=" text-2xl font-bold">2000+</span>
              </div>
              <div
                class="border text-xs p-2 select-none hover:bg-white/15 duration-150"
              >
                Feedback 
                <br>
                <span class=" text-2xl font-bold">95%</span>
              </div>


          </div>
        </div>
      </div>

      <div class="bg-white p-2 w-2/3 flex justify-end gap-2">
        <div class="relative inline-block group">
              <button class="button-clean-dark">Cerrar</button>
              <span class="shadow-box-dark"></span>
            </div>
        <div class="relative inline-block group">
              <button class="button-clean-dark">Ver Imagenes</button>
              <span class="shadow-box-dark"></span>
            </div>
        
      </div>
    </div>
  </div>
</BaseLayout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const tl = gsap.timeline({
    scrollTrigger: {
      scrub: true,
    },
  });

  // tl.to("#navbar", {
  // 	scale: 0
  // });

  // Animaci贸n para el avatar
  gsap.from("#avatar", {
    opacity: 0,
    y: 50,
    duration: 1,
    ease: "power2.out",
    scrollTrigger: {
      trigger: "#avatar",
      start: "top 80%",
      toggleActions: "play none none none",
    },
  });

  // Animaci贸n para la secci贸n de experiencia
  gsap.from("#experiencia", {
    opacity: 0,
    y: 80,
    duration: 1,
    ease: "power2.out",
    scrollTrigger: {
      trigger: "#experiencia",
      start: "top 80%",
      toggleActions: "play none none none",
    },
  });

  // Animaci贸n para la secci贸n Sobre m铆
  gsap.from("#sobre-mi", {
    opacity: 0,
    y: 80,
    duration: 1,
    ease: "power2.out",
    scrollTrigger: {
      trigger: "#sobre-mi",
      start: "top 80%",
      toggleActions: "play none none none",
    },
  });

  // Animaci贸n para cada cajita de experiencia
  gsap.from("#experiencia .Experiencebox", {
    opacity: 0,
    y: 40,
    duration: 0.8,
    stagger: 0.2,
    ease: "power2.out",
    scrollTrigger: {
      trigger: "#experiencia",
      start: "top 80%",
      toggleActions: "play none none none",
    },
  });

  // Animaci贸n para la secci贸n de proyectos
  gsap.from("#proyectos", {
    opacity: 0,
    y: 80,
    duration: 1,
    ease: "power2.out",
    scrollTrigger: {
      trigger: "#proyectos",
      start: "top 80%",
      toggleActions: "play none none none",
    },
  });

  // Animaci贸n para cada cajita de proyecto
  gsap.from("#proyectos .Projectsbox", {
    opacity: 0,
    y: 40,
    duration: 0.8,
    stagger: 0.2,
    ease: "power2.out",
    scrollTrigger: {
      trigger: "#proyectos",
      start: "top 80%",
      toggleActions: "play none none none",
    },
  });
  import { getAllPeople } from "../utils/dataUtils";

  // Attach event listener after DOM is loaded
  if (typeof window !== "undefined") {
    window.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("copyright-btn");
      if (btn) {
        btn.addEventListener("click", () => console.log(getAllPeople()));
      }
    });
  }
</script>
